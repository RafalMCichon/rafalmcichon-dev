{%- assign raw_title = page.seo_title | default: page.title | default: site.title -%}
{%- assign meta_desc = page.description | default: site.description -%}
{%- assign robots = page.robots | default: "index,follow" -%}
{%- assign canonical = site.url | append: page.url -%}
{%- assign og_title = page.og_title | default: raw_title -%}
{%- assign og_desc = page.og_description | default: meta_desc -%}
{%- assign og_image = page.image | default: site.image | default: "/assets/og-default.png" -%}

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

{%- if raw_title == site.title -%}
<title>{{ site.title }}</title>
{%- else -%}
<title>{{ raw_title }} Â· {{ site.title }}</title>
{%- endif -%}

<meta name="description" content="{{ meta_desc | escape }}">
<meta name="robots" content="{{ robots }}">
<meta name="author" content="Rafal M Cichon">

<link rel="canonical" href="{{ canonical }}">

<meta name="color-scheme" content="light dark">
<link rel="stylesheet" href="/assets/site.css">

<!-- Favicons -->
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="alternate icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<!-- Open Graph -->
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:title" content="{{ og_title | escape }}">
<meta property="og:description" content="{{ og_desc | escape }}">
<meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
<meta property="og:url" content="{{ canonical }}">
<meta property="og:image" content="{{ site.url }}{{ og_image }}">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ og_title | escape }}">
<meta name="twitter:description" content="{{ og_desc | escape }}">
<meta name="twitter:image" content="{{ site.url }}{{ og_image }}">

<!-- Structured data -->
{% include schema-website.jsonld %}
{% include schema-person.jsonld %}
{% if page.layout == 'post' %}{% include schema-article.jsonld %}{% endif %}

<!-- RSS feed -->
<link rel="alternate" type="application/rss+xml" title="{{ site.title | escape }}" href="{{ site.url }}/feed.xml">
